<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>자녀장려금 신청 자격 확인</title>
</head>
<body>
  <h1>자녀장려금 신청 자격 확인하기</h1>
  <p>정기 자녀장려금은 저소득 가구의 자녀 양육을 지원하기 위한 제도로, 일정 요건을 충족하는 경우 매년 5월 신청할 수 있습니다.</p>

  <h2>1단계: 신청 조건 확인</h2>
  <form id="eligibilityForm">
    <label>연령(만): <input type="number" id="age" required></label><br>
    <label>부양 자녀 수(18세 미만): <input type="number" id="children" required></label><br>
    <label>배우자 있음: <input type="checkbox" id="spouse" onchange="toggleSpouseIncome()"></label><br>
    <div id="spouseIncomeBox" style="display:none">
      <label>배우자 연소득 (만원): <input type="number" id="spouseIncome"></label><br>
    </div>
    <label>본인 연소득 (만원): <input type="number" id="income" required></label><br>
    <label>2024년 재산 (만원): <input type="number" id="asset" required></label><br>
    <button type="button" onclick="checkEligibility()">자격 확인</button>
  </form>

  <h2 id="resultTitle" style="display:none">결과</h2>
  <div id="result" style="margin-top: 10px;"></div>

  <script>
    function toggleSpouseIncome() {
      const spouseChecked = document.getElementById('spouse').checked;
      document.getElementById('spouseIncomeBox').style.display = spouseChecked ? 'block' : 'none';
    }

    function checkEligibility() {
      const age = document.getElementById('age').value;
      const children = document.getElementById('children').value;
      const income = document.getElementById('income').value;
      const asset = document.getElementById('asset').value;
      const isMarried = document.getElementById('spouse').checked;
      const spouseIncome = isMarried ? document.getElementById('spouseIncome').value : 0;

      // 빈칸 확인
      if (!age || !children || !income || !asset || (isMarried && !spouseIncome)) {
        alert('모든 필수 항목을 입력해 주세요.');
        return;
      }

      const ageVal = parseInt(age);
      const childrenVal = parseInt(children);
      const assetVal = parseInt(asset);
      const incomeVal = parseInt(income);
      const spouseIncomeVal = isMarried ? parseInt(spouseIncome) : 0;
      const totalIncome = incomeVal + spouseIncomeVal;

      let maxIncome = 4000; // 단독가구 기본값
      if (isMarried) {
        if (spouseIncomeVal >= 300) {
          maxIncome = 8000; // 맞벌이
        } else {
          maxIncome = 7000; // 홑벌이
        }
      }

      let resultText = '';

      if (childrenVal < 1) {
        resultText = '자녀가 없으면 자녀장려금 대상이 아닙니다.';
      } else if (totalIncome > maxIncome || assetVal > 20000) {
        resultText = `소득 또는 재산 기준을 초과하여 신청할 수 없습니다. (해당 가구 기준 소득 상한: ${maxIncome}만원, 합산 소득: ${totalIncome}만원)`;
      } else {
        let maxAmount = 0;
        if (childrenVal === 1) maxAmount = 80;
        else if (childrenVal === 2) maxAmount = 120;
        else maxAmount = 150;

        resultText = `신청 가능합니다! 예상 최대 지급액: ${maxAmount}만원 (총소득: ${totalIncome}만원)`;
      }

      document.getElementById('resultTitle').style.display = 'block';
      document.getElementById('result').innerHTML = resultText;
    }
  </script>
</body>
</html>